(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Home"],{"159b":function(e,t,n){var r=n("da84"),a=n("fdbc"),i=n("785a"),s=n("17c2"),c=n("9112"),o=function(e){if(e&&e.forEach!==s)try{c(e,"forEach",s)}catch(t){e.forEach=s}};for(var l in a)a[l]&&o(r[l]&&r[l].prototype);o(i)},"16c0":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("van-nav-bar",{attrs:{fixed:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("img",{staticClass:"logo",attrs:{src:e.imgObj}})]},proxy:!0},{key:"right",fn:function(){return[n("van-icon",{attrs:{name:"search",size:"0.48rem",color:"#fff"},on:{click:e.searchPage}})]},proxy:!0}])})],1),n("div",{staticClass:"main"},[n("van-tabs",{attrs:{sticky:"","offset-top":"1.226667rem",animated:"",swipeable:""},on:{change:e.channelChangeFn},model:{value:e.channelId,callback:function(t){e.channelId=t},expression:"channelId"}},e._l(e.userChannelList,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name,name:t.id}},[n("ArticleList",{attrs:{channelId:e.channelId}})],1)})),1),n("van-icon",{staticClass:"moreChannels",attrs:{name:"plus",size:"0.37333334rem"},on:{click:e.plusClickFn}})],1),n("van-popup",{staticClass:"channel_popup",attrs:{"get-container":"body"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("ChannelEdit",{ref:"editRef",attrs:{userList:e.userChannelList,unCheckList:e.unCheckChannelList},on:{addChannelEV:e.addChannelFn,closeEV:e.close,removeChannel:e.removeChannel},model:{value:e.channelId,callback:function(t){e.channelId=t},expression:"channelId"}})],1)],1)},a=[],i=n("5530"),s=n("1da1"),c=(n("4de4"),n("d3b7"),n("d81d"),n("b0c0"),n("c740"),n("a434"),n("96cf"),n("365c")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了",offset:"50"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t){return n("ArticleItem",{key:t.art_id,attrs:{artObj:t,offset:"50","immediate-check":!1},on:{dislikeEV:e.dislikeFn,reportEV:e.reportFn},nativeOn:{click:function(n){return e.itemClickFn(t.art_id)}}})})),1)],1)],1)},l=[],u=(n("9889"),n("f564")),f=n("2909"),d=(n("a9e3"),n("99af"),n("d10e")),h={props:{channelId:Number},data:function(){return{list:[],loading:!1,finished:!1,theTime:(new Date).getTime(),isLoading:!1}},components:{ArticleItem:d["a"]},created:function(){this.getArticleListFn()},methods:{getArticleListFn:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["g"])({channel_id:e.channelId,timestamp:e.theTime});case 2:n=t.sent,console.log(n),e.list=[].concat(Object(f["a"])(e.list),Object(f["a"])(n.data.data.results)),e.theTime=n.data.data.pre_timestamp,e.loading=!1,null===n.data.data.results.timestamp&&(e.finished=!0),e.isLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},onLoad:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.list.length){t.next=3;break}return e.loading=!1,t.abrupt("return");case 3:e.getArticleListFn();case 4:case"end":return t.stop()}}),t)})))()},onRefresh:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.list=[],e.theTime=(new Date).getTime(),e.getArticleListFn();case 3:case"end":return t.stop()}}),t)})))()},dislikeFn:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["f"])({artId:e});case 2:Object(u["a"])({type:"success",message:"反馈成功"});case 3:case"end":return t.stop()}}),t)})))()},reportFn:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(c["n"])({artId:e,type:t});case 2:Object(u["a"])({type:"success",message:"举报成功"});case 3:case"end":return n.stop()}}),n)})))()},itemClickFn:function(e){this.$router.push({path:"/detail?art_id=".concat(e)})}}},m=h,p=n("2877"),v=Object(p["a"])(m,o,l,!1,null,null,null),b=v.exports,g=n("9e81"),w=n.n(g),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-nav-bar",{attrs:{title:"频道管理"},scopedSlots:e._u([{key:"right",fn:function(){return[n("van-icon",{attrs:{name:"cross",size:"0.37333334rem",color:"white"},on:{click:e.closeEV}})]},proxy:!0}])}),n("div",{staticClass:"my-channel-box"},[n("div",{staticClass:"channel-title"},[n("span",[e._v("我的频道 "),n("span",{staticClass:"small-title"},[e._v(" 点击"+e._s(e.isEdit?"删除":"进入")+"频道 ")])]),n("span",{on:{click:e.editFn}},[e._v(e._s(e.isEdit?"完成":"编辑"))])]),n("van-row",{attrs:{type:"flex"}},e._l(e.userList,(function(t){return n("van-col",{key:t.id,attrs:{span:"6"},on:{click:function(n){return e.userChannelFn(t)}}},[n("div",{staticClass:"channel-item van-hairline--surround"},[e._v(" "+e._s(t.name)+" "),n("van-badge",{directives:[{name:"show",rawName:"v-show",value:e.isEdit&&0!==t.id,expression:"isEdit&&obj.id!==0"}],staticClass:"cross-badge",attrs:{color:"transparent"},scopedSlots:e._u([{key:"content",fn:function(){return[n("van-icon",{staticClass:"badge-icon",attrs:{name:"cross",color:"#cfcfcf",size:"0.32rem"}})]},proxy:!0}],null,!0)})],1)])})),1)],1),n("div",{staticClass:"more-channel-box"},[e._m(0),n("van-row",{attrs:{type:"flex"}},e._l(e.unCheckList,(function(t){return n("van-col",{key:t.id,attrs:{span:"6"},on:{click:function(n){return e.moreFn(t)}}},[n("div",{staticClass:"channel-item van-hairline--surround"},[e._v(e._s(t.name))])])})),1)],1)],1)},x=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel-title"},[n("span",[e._v("点击添加更多频道：")])])}],y={props:{userList:Array,unCheckList:Array},data:function(){return{isEdit:!1,show:!0}},methods:{editFn:function(){this.isEdit=!this.isEdit},moreFn:function(e){!0===this.isEdit&&this.$emit("addChannelEV",e)},closeEV:function(){this.$emit("closeEV")},userChannelFn:function(e){!0===this.isEdit?0!==e.id&&this.$emit("removeChannel",e):(this.$emit("closeEV"),this.$emit("input",e.id))}}},j=y,E=(n("77e3"),Object(p["a"])(j,O,x,!1,null,"587798f6",null)),_=E.exports,C={name:"Home",data:function(){return{imgObj:w.a,channelId:0,userChannelList:[],articleList:[],show:!1,allChannelList:[],channelScrollTObj:{}}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["i"])();case 2:return n=t.sent,console.log(n),e.userChannelList=n.data.data.channels,t.next=7,Object(c["h"])();case 7:r=t.sent,e.allChannelList=r.data.data.channels;case 9:case"end":return t.stop()}}),t)})))()},methods:{channelChangeFn:function(){var e=this;this.$nextTick((function(){document.documentElement.scrollTop=e.channelScrollTObj[e.channelId],document.body.scrollTop=e.channelScrollTObj[e.channelId]}))},plusClickFn:function(){this.show=!0},addChannelFn:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.userChannelList.push(e),r=t.userChannelList.filter((function(e){return 0!==e.id})),a=r.map((function(e,t){var n=Object(i["a"])({},e);return delete n.name,n.seq=t,n})),n.next=5,Object(c["r"])({channels:a});case 5:s=n.sent,console.log(s);case 7:case"end":return n.stop()}}),n)})))()},close:function(){this.show=!1,this.$refs.editRef.isEdit=!1},removeChannel:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.userChannelList.findIndex((function(t){return t.id===e.id})),t.userChannelList.splice(r,1),n.next=4,Object(c["m"])({channelId:e.id});case 4:a=n.sent,console.log(a);case 6:case"end":return n.stop()}}),n)})))()},searchPage:function(){this.$router.push("/search")},scrollFn:function(){this.$route.meta.scrollT=document.documentElement.scrollTop||document.documentElement.scrollTop,this.channelScrollTObj[this.channelId]=document.documentElement.scrollTop||document.documentElement.scrollTop}},components:{ArticleList:b,ChannelEdit:_},computed:{unCheckChannelList:function(){var e=this,t=this.allChannelList.filter((function(t){var n=e.userChannelList.findIndex((function(e){return e.id===t.id}));return!(n>-1)}));return t}},activated:function(){console.log(this.$route),window.addEventListener("scroll",this.scrollFn),document.documentElement.scrollTop=this.$route.meta.scrollT,document.body.scrollTop=this.$route.meta.scrollT},deactivated:function(){window.removeEventListener("scroll",this.scrollFn)}},k=C,I=(n("fffb"),Object(p["a"])(k,r,a,!1,null,"29caf934",null));t["default"]=I.exports},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,a=n("a640"),i=a("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},"4de4":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").filter,i=n("1dde"),s=i("filter");r({target:"Array",proto:!0,forced:!s},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("159b"),n("dbb4");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},"55a8":function(e,t,n){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("e330"),a=n("1d80"),i=n("577e"),s=n("5899"),c=r("".replace),o="["+s+"]",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),f=function(e){return function(t){var n=i(a(t));return 1&e&&(n=c(n,l,"")),2&e&&(n=c(n,u,"")),n}};e.exports={start:f(1),end:f(2),trim:f(3)}},"77e3":function(e,t,n){"use strict";n("7d2e")},"7d2e":function(e,t,n){},"9e81":function(e,t,n){e.exports=n.p+"img/toutiao_logo.4653c8be.png"},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("da84"),i=n("23cb"),s=n("5926"),c=n("07fa"),o=n("7b0b"),l=n("65f0"),u=n("8418"),f=n("1dde"),d=f("splice"),h=a.TypeError,m=Math.max,p=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var n,r,a,f,d,g,w=o(this),O=c(w),x=i(e,O),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=O-x):(n=y-2,r=p(m(s(t),0),O-x)),O+n-r>v)throw h(b);for(a=l(w,r),f=0;f<r;f++)d=x+f,d in w&&u(a,f,w[d]);if(a.length=r,n<r){for(f=x;f<O-r;f++)d=f+r,g=f+n,d in w?w[g]=w[d]:delete w[g];for(f=O;f>O-r+n;f--)delete w[f-1]}else if(n>r)for(f=O-r;f>x;f--)d=f+r-1,g=f+n-1,d in w?w[g]=w[d]:delete w[g];for(f=0;f<n;f++)w[f+x]=arguments[f+2];return w.length=O-r+n,a}})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("e330"),s=n("94ca"),c=n("cb2d"),o=n("1a2d"),l=n("7156"),u=n("3a9b"),f=n("d9b5"),d=n("c04e"),h=n("d039"),m=n("241c").f,p=n("06cf").f,v=n("9bf2").f,b=n("408a"),g=n("58a8").trim,w="Number",O=a[w],x=O.prototype,y=a.TypeError,j=i("".slice),E=i("".charCodeAt),_=function(e){var t=d(e,"number");return"bigint"==typeof t?t:C(t)},C=function(e){var t,n,r,a,i,s,c,o,l=d(e,"number");if(f(l))throw y("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=g(l),t=E(l,0),43===t||45===t){if(n=E(l,2),88===n||120===n)return NaN}else if(48===t){switch(E(l,1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(i=j(l,2),s=i.length,c=0;c<s;c++)if(o=E(i,c),o<48||o>a)return NaN;return parseInt(i,r)}return+l};if(s(w,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var k,I=function(e){var t=arguments.length<1?0:O(_(e)),n=this;return u(x,n)&&h((function(){b(n)}))?l(Object(t),n,I):t},L=r?m(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),T=0;L.length>T;T++)o(O,k=L[T])&&!o(I,k)&&v(I,k,p(O,k));I.prototype=x,x.constructor=I,c(a,w,I)}},b64b:function(e,t,n){var r=n("23e7"),a=n("7b0b"),i=n("df75"),s=n("d039"),c=s((function(){i(1)}));r({target:"Object",stat:!0,forced:c},{keys:function(e){return i(a(e))}})},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),s="findIndex",c=!0;s in[]&&Array(1)[s]((function(){c=!1})),r({target:"Array",proto:!0,forced:c},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},d10e:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-cell",{scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"title-box"},[n("span",[e._v(e._s(e.artObj.title))]),1===e.artObj.cover.type?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.artObj.cover.images[0],expression:"artObj.cover.images[0]"}],staticClass:"thumb",attrs:{alt:""}}):e._e()]),e.artObj.cover.type>1?n("div",{staticClass:"thumb-box"},e._l(e.artObj.cover.images,(function(e,t){return n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"imgUrl"}],key:t,staticClass:"thumb",attrs:{alt:""}})})),0):e._e()]},proxy:!0},{key:"label",fn:function(){return[n("div",{staticClass:"label-box"},[n("div",[n("span",[e._v(e._s(e.artObj.aut_name))]),n("span",[e._v(e._s(e.artObj.comm_count)+"评论")]),n("span",[e._v(e._s(e.artObj.pubdate))])]),e.isShow?n("van-icon",{attrs:{name:"cross"},on:{click:function(t){t.stopPropagation(),e.show=!0}}}):e._e()],1)]},proxy:!0}])}),n("van-action-sheet",{attrs:{actions:e.actions,"cancel-text":e.bottomText,"get-container":"body"},on:{select:e.onSelect,cancel:e.cancelFn,close:e.closeFn},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},a=[],i=(n("b0c0"),[{name:"不感兴趣"},{name:"反馈垃圾内容"}]),s=[{value:0,name:"其它问题"},{value:1,name:"标题夸张"},{value:2,name:"低俗色情"},{value:3,name:"错别字多"},{value:4,name:"旧闻重复"},{value:6,name:"内容不实"},{value:8,name:"侵权"},{value:5,name:"广告软文"},{value:7,name:"涉嫌违法犯罪"}],c={props:{artObj:Object,isShow:{type:Boolean,default:!0}},data:function(){return{show:!1,actions:i,bottomText:"取消哦"}},methods:{onSelect:function(e,t){"反馈垃圾内容"===e.name?(this.actions=s,this.bottomText="返回哈"):"不感兴趣"===e.name?(this.$emit("dislikeEV",this.artObj.art_id),this.show=!1):(this.$emit("reportEV",this.artObj.art_id,e.value),this.show=!1)},cancelFn:function(){"返回哈"===this.bottomText&&(this.show=!0,this.actions=i,this.bottomText="取消哦")},closeFn:function(){this.actions=i,this.bottomText="取消哦"}}},o=c,l=(n("f4c6"),n("2877")),u=Object(l["a"])(o,r,a,!1,null,"66105e0e",null);t["a"]=u.exports},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,i=n("1dde"),s=i("map");r({target:"Array",proto:!0,forced:!s},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,n){var r=n("23e7"),a=n("83ab"),i=n("56ef"),s=n("fc6a"),c=n("06cf"),o=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,r=s(e),a=c.f,l=i(r),u={},f=0;while(l.length>f)n=a(r,t=l[f++]),void 0!==n&&o(u,t,n);return u}})},e439:function(e,t,n){var r=n("23e7"),a=n("d039"),i=n("fc6a"),s=n("06cf").f,c=n("83ab"),o=a((function(){s(1)})),l=!c||o;r({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(e,t){return s(i(e),t)}})},e95a1:function(e,t,n){},f4c6:function(e,t,n){"use strict";n("55a8")},fffb:function(e,t,n){"use strict";n("e95a1")}}]);
//# sourceMappingURL=Home.3feafb17.js.map